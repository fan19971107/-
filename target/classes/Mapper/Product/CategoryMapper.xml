<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fancx.Products.Mapper.CategoryMapper">
    <insert id="addCategory">
        INSERT INTO pms_product_category(parent_id, NAME, LEVEL, nav_status, show_status, sort, avatar, keywords,
                                         description)
        VALUES (#{parent_id}, #{name}, #{level}, #{nav_status}, #{show_status}, #{sort}, #{avatar}, #{keywords},
                #{description})

    </insert>
    <select id="getCategorySelector" resultType="com.fancx.Products.Entity.CategoryEntity">
        select id, name,level
        from pms_product_category
        <where>
            <if test="parent_id!=-1">
                parent_id=#{id}
            </if>
            <if test="parent_id==-1">
                level=1
            </if>
        </where>
    </select>
    <select id="getCategory" resultType="com.fancx.Products.Entity.CategoryEntity">
        SELECT * FROM pms_product_category
        <where>
            <if test="parent_id!=-1">parent_id=#{parent_id}</if>
        </where>
        LIMIT #{start},#{pageSize}
    </select>
    <select id="getCategoryPageCount" resultType="java.lang.Integer">
        SELECT COUNT(id) FROM pms_product_category
        <where>
            <if test="parent_id!=-1">parent_id=#{parent_id}</if>
        </where>
    </select>
</mapper>